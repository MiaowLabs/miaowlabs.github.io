---
layout: wiki
title: 互补滤波器
---

# {{ page.title }}

> 作者：Songyimiao

滤波器通常有模拟滤波器和数字滤波器。模拟滤波器完全依靠电阻器、电容器、晶体管等电子元件组成的物理网络实现滤波功能。数字滤波器是由数字乘法器、加法器和延时单元组成的一种算法或装置，功能是对输入离散信号进行运算处理，以达到实现滤波的目的。

我们下面讨论的各种滤波器，都属于数字滤波器。

在了解互补滤波器之前，先来了解三个基本概念。

* 低通滤波器
* 高通滤波器
* 带通滤波器

> 低通滤波器（英语：Low-pass filter）容许低频信号通过，但减弱（或减少）频率高于截止频率的信号的通过。'低'和'高'频率的含义，是相对于滤波器设计者所选择的截止频率而言的。

> 高通滤波器则相反，而带通滤波器则是高通滤波器和低通滤波器的组合。

互补滤波器，也是带通滤波器的变种。

一阶互补滤波核心代码非常简洁：

	angle = (0.98)*(angle + gyro * dt) + (0.02)*(x_acc);

其中，`angle`为得到的实际角度，`gyro`为陀螺仪值，`x_acc`为加速度值，`dt`为计算周期；、、

##积分

学过高中物理的同学都知道，速度*时间=路程。如果知道了起点位置、速度和时间，通过计算就能得到路程。转化为代码就是：

	position += speed*dt;

其中，`position`为路程，`speed`为速度，`dt`为计算周期。`speed*dt` 得到计算周期时间段内通过的路程，通过对该路程的积分（不断累加），得到系统运行以来的路程。

同理，通过对角速度的积分，即可得到角度。

	angle += gyro*dt; 

其中，`angle`为角度，`gyro`为陀螺仪角速度，`dt`为计算周期。`gyro*dt` 得到计算周期时间段内通过的角度，通过对该角度的积分（不断累加），得到系统运行以来的角度。

互补滤波器中`angle = (0.98)*(angle + gyro * dt) + (0.02)*(x_acc)`中`(angle + gyro * dt)`是一个积分器，工作原理和上面说的一样。

##低通滤波器

	angle = (0.98)*angle + (0.02)*x_acc;





