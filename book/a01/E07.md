# 正反馈与负反馈的统一

假设PID正反馈控制下，被控制对象不是两轮自平衡小车，而是一个四轮小车，那么会有什么样的情形发生呢？

对于一个无姿态平衡控制的四轮小车，如果其PID速度控制策略为正反馈，其正反馈的特性必将导致灾难性的后果：若控制量u使速度v增长，则控制量u必将随速度v的增长而增长，速度v又将因控制量u的增长而继续增长；反之，若控制量u使速度v负增长，则控制量u必将随速度v的负增长而负增长，速度v又将因控制量u的负增长而继续负增长。

如果没有抑制措施，四轮小车的推进力、速度和位移，都将无限制地增长至无穷大。

两轮自平衡小车是欠驱动系统，其平衡控制需要电机不断地变换电枢的转向和转速，这势必与运动控制所期望的速度和方向发生矛盾，正是这种矛盾导致了两轮自平衡小车特殊的控制结构。

两轮自平衡小车系统将“平衡”与“运动”这对矛盾体统一在其运动平衡控制结构中。这种统一体现在直立平衡控制u<sub>angle</sub>(t)与行进速度控制u<sub>speed</sub>(t)的叠加与融合：

u<sub>motor</sub>(t)=u<sub>angle</sub>(t)+u<sub>speed</sub>(t)=PD<sub>angle</sub>(θ)+PI<sub>speed</sub>(e<sub>v</sub>)

其中，u<sub>motor</sub>(t)是直立平衡控制量u<sub>angle</sub>(t)与速度控制量u<sub>speed</sub>(t)叠加后的电机输出量，需要通过差动系统分配给左电机和右电机。

综上所述，如果电机输出量u<sub>motor</sub>中未融入PD直立控制器PD<sub>angle</sub>(θ)生成的平衡控制量u<sub>angle</sub>，PI速度控制器PI<sub>speed</sub>(e<sub>v</sub>)的正反馈特性必将导致系统的不稳定。然而，当两者共同作用于两轮自平衡小车时，情形却完全不同，行进速度控制信号u<sub>speed</sub>不仅不会导致系统雪崩式地加速，反而会移植系统的运动速度，并且行进速度控制量u<sub>speed</sub>越大，这种抑制作用就越大。

在两轮自平衡小车系统的运动平衡控制问题中，“平衡”与“运动”是一对矛盾的两个方面，既矛盾又统一，其中平衡是矛盾的主要方面。因此在运动平衡控制系统中，直立平衡控制器PD<sub>angle</sub>占据着主导作用，而速度环占据着次要地位。

自由平衡实验显示（设置期望速度v=0，Ki<sub>speed</sub>=0）：两轮自平衡小车在静止平衡的状态下受到外力作用后以一定的速度ν运动，根据正反馈控制算法PI<sub>speed</sub>，两轮自平衡小车将产生于外力同向的控制量u<sub>speed</sub>，运动加速。然而，实际的情形是，两轮自平衡小车表现出对外力的抵制和对速度ν的抑制，并且当外力撤销后，两轮自平衡小车又自动回复到静止平衡的状态。

定点平衡实验显示：两轮自平衡小车在静止平衡的状态下受到外力作用后以一定速度v运动，并且发送了位移x，根据正反馈控制算法PI<sub>speed</sub>，两轮自平衡小车将产生与外力同向的控制量u<sub>speed</sub>,运动加速。然而，实际的情形是，两轮自平衡小车表现出对外力的抵制和对速度v的抑制。用手推两轮自平衡小车，小车会以顶牛的方式通过姿态倾斜形成反推力，力图回归位移零点；外力撤销后，两轮自平衡小车不仅恢复了静止平衡状态，并且回到了扰动前所在的位移零点位置。

两轮自平衡小车的行进速度控制是通过其姿态平衡控制实现的。正反馈的行进速度控制器PI<sub>speed</sub>，实施的是“欲擒故纵”策略：为了控制速度，先放纵速度，导致小车姿态失衡，从而引发起主导作用的直立控制PD<sub>angle</sub>（θ），使原来可能矛盾的速度v控制与姿态θ控制转变为一致的控制问题，即两轮自平衡小车统一（叠加）后的控制量u<sub>angle</sub>(t)+u<sub>speed</sub>(t)能在控制姿态平衡的同时控制行进速度稳定地跟踪期望速度。


